import{r as o,j as e,u as w,d as D,e as q,V as N,f as S}from"./index-C7f5YVAw.js";import{u as F}from"./index.esm-D1PVK8jT.js";function C({details:a,totalDays:h,setTotalDays:u,fromDate:f,setFromDate:x,toDate:j,setToDate:g}){const[d,r]=o.useState(f||""),[i,c]=o.useState(j||""),l=a?.pricing[0]?.discountedPrice||0;function m(s){return s?new Date(s).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).replace(/ /g,"-"):""}return o.useEffect(()=>{if(d&&i){const s=new Date(d),n=new Date(i),b=Math.ceil((n-s)/(1e3*60*60*24));u(b>0?b:0)}},[d,i,u]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-4 rounded-lg shadow-md bg-white w-full",children:[e.jsx("h2",{className:"text-xl font-bold mb-3",children:"Summary"}),e.jsx("img",{src:a?.images.main,alt:a?.name,className:"w-full h-40 object-cover rounded mb-3"}),e.jsx("h3",{className:"text-lg font-semibold",children:a?.name}),e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:[e.jsx("i",{className:"fa-solid fa-location-dot mr-1"}),a?.address?.street,", ",a?.address?.city]}),e.jsxs("div",{className:"flex flex-col gap-2 mb-3",children:[e.jsx("label",{children:"From:"}),e.jsx("input",{type:"date",className:"input input-bordered",value:d,onChange:s=>{const n=m(s.target.value);r(s.target.value),x&&x(n)}}),e.jsx("label",{children:"To:"}),e.jsx("input",{type:"date",className:"input input-bordered",value:i,onChange:s=>{const n=m(s.target.value);c(s.target.value),g&&g(n)}})]}),e.jsxs("div",{className:"text-sm text-gray-600 mb-3",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"From:"})," ",m(d)]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"To:"})," ",m(i)]})]}),e.jsxs("div",{className:"border rounded-xl bg-gray-50 p-3",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Price per night:"})," ",l," ",a?.pricing[0]?.currency]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Nights:"})," ",h]}),e.jsxs("p",{className:"font-bold text-green-700 mt-2",children:["Total: ",l*h," ",a?.pricing[0]?.currency]})]})]})})}function M(){const[a,h]=o.useState(0),[u,f]=o.useState(""),[x,j]=o.useState(""),g=w(),r=D().state?.details,i=q(),c=JSON.parse(localStorage.getItem("user")),{register:l,handleSubmit:m,formState:{errors:s}}=F({defaultValues:{firstname:c?.username?.split(" ")[0]||"",lastname:c?.username?.split(" ")[1]||"",email:c?.email||"",phone:c?.phone||""}}),n=t=>{if(a===0){N.error("Please select valid dates");return}const p=r.pricing[0].discountedPrice*a,v={...t,hotel:r.name,totalDays:a,totalPrice:p,fromDate:u,toDate:x,image:r?.images?.main,address:r?.address};localStorage.setItem("bookingData",JSON.stringify(t)),i(S(v)),N.success("Booking Success"),g("/my-bookings")},b=[{label:"Select Country",value:"Select Country",disabled:!0,selected:!0},{label:"United States",value:"US"},{label:"Morocco",value:"MA"},{label:"Egypt",value:"EG"},{label:"Greece",value:"GR"}],y=[{label:"Mr.",value:"mr"},{label:"Miss.",value:"miss"},{label:"Mrs.",value:"mrs"},{label:"Ms.",value:"ms"}];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-3 items-center mb-12 bg-white py-8 px-5 rounded-lg",children:[e.jsx("span",{className:"font-semibold border-r-2 pr-2 border-gray-300",children:"Booking"}),e.jsx("div",{className:"breadcrumbs text-sm",children:e.jsxs("ul",{children:[e.jsx("li",{className:"text-gray-300",children:e.jsx("a",{children:"Hotels"})}),e.jsx("li",{className:"text-gray-300",children:e.jsx("a",{children:"Hotel Details"})}),e.jsx("li",{className:"text-blue-600 font-semibold",children:"Booking"})]})})]}),e.jsxs("div",{className:"flex gap-8 justify-between",children:[e.jsx("div",{className:"bg-white py-8 px-5 rounded-lg w-5/6",children:e.jsxs("form",{onSubmit:m(n),children:[e.jsx("h2",{className:"text-3xl font-bold mb-3",children:"Your Details"}),e.jsxs("div",{className:"flex gap-5 mb-3",children:[e.jsxs("div",{className:"flex flex-col py-2 gap-2 w-1/5",children:[e.jsx("label",{htmlFor:"title",children:"Title"}),e.jsx("select",{id:"title",className:" select select-info w-full bg-gray-100 rounded-lg",...l("title",{required:"Title is required"}),children:y.map((t,p)=>e.jsx("option",{value:t.value,children:t.label},p))})]}),e.jsxs("div",{className:"flex flex-col py-2 gap-2 w-2/5",children:[e.jsx("label",{htmlFor:"fname",children:"First name"}),e.jsx("input",{type:"text",id:"fname",placeholder:"Enter your first name...",className:"input input-info w-full bg-gray-100 rounded-lg",...l("firstname",{required:"First name is required"})}),s.firstname&&e.jsx("p",{className:"text-red-500 text-sm",children:s.firstname.message})]}),e.jsxs("div",{className:"flex flex-col py-2 gap-2 w-2/5",children:[e.jsx("label",{htmlFor:"lname",children:"Last name"}),e.jsx("input",{type:"text",id:"lname",placeholder:"Enter your first name...",className:"input input-info w-full bg-gray-100 rounded-lg ",...l("lastname",{required:"Last name is required"})}),s.lastname&&e.jsx("p",{className:"text-red-500 text-sm",children:s.lastname.message})]})]}),e.jsxs("div",{className:"mb-3 flex flex-col py-2 gap-2",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",placeholder:"Enter your email...",className:"input input-info w-full bg-gray-100 rounded-lg ",...l("email",{required:"Email is required",pattern:{value:/[^@ \t\r\n]+@[^@ \t\r\n]+\.[^@ \t\r\n]+/,message:"Email is not valid"}})}),s.email&&e.jsxs("p",{className:"text-red-500 text-sm",children:[s.email.message," "]})]}),e.jsxs("div",{className:"flex gap-5 mb-15 border-b-2 pb-15 border-gray-200",children:[e.jsxs("div",{className:"w-2/6 flex flex-col py-2 gap-2",children:[e.jsx("label",{htmlFor:"country",children:"Country"}),e.jsx("select",{id:"country",className:"select select-info w-full bg-gray-100 rounded-lg",...l("country",{required:"Country is required"}),children:b.map((t,p)=>e.jsx("option",{value:t.value,disabled:t.disabled,selected:t.selected,children:t.label},p))})]}),e.jsxs("div",{className:"w-4/6 flex flex-col py-2 gap-2",children:[e.jsx("label",{htmlFor:"phone",children:"Mobile"}),e.jsx("input",{type:"tel",id:"phone",placeholder:"Enter your phone number...",className:"input input-info w-full bg-gray-100 rounded-lg",...l("phone",{required:"Phone is required",pattern:{value:/^[0-9]{10,12}$/,message:"Phone number must contain only digits"}})}),s.phone&&e.jsxs("p",{className:"text-red-500 text-sm",children:[" ",s.phone.message," "]})]})]}),e.jsx("h2",{className:"text-3xl font-bold mb-3",children:"Payment Details"}),e.jsxs("div",{className:"mb-3 flex flex-col py-2 gap-2",children:[e.jsx("label",{htmlFor:"cardNum",children:"Card Number"}),e.jsx("input",{type:"text",placeholder:"Enter your card number...",className:"input input-info w-full bg-gray-100 rounded-lg",...l("cardNumber",{required:"Card number is required",pattern:{value:/\d{13,19}/,message:"Card number must contain only 13 to 19 digits"}})}),s.cardNumber&&e.jsxs("p",{className:"text-red-500 text-sm",children:[" ",s.cardNumber.message," "]})]}),e.jsxs("div",{className:"flex gap-5 mb-3",children:[e.jsxs("div",{className:"w-3/6 flex flex-col py-2 gap-2",children:[e.jsx("label",{htmlFor:"cardNum",children:"CVV"}),e.jsx("input",{type:"text",placeholder:"CVV number...",className:"input input-info w-full bg-gray-100 rounded-lg",...l("cvvNumber",{required:"CVV is required",maxLength:{value:3,message:"CVV must be max 3 numbers"},pattern:{value:/\d{3}/,message:"CVV must contain only digits"}})}),s.cvvNumber&&e.jsxs("p",{className:"text-red-500 text-sm",children:[" ",s.cvvNumber.message," "]})]}),e.jsxs("div",{className:"w-3/6 flex flex-col py-2 gap-2",children:[e.jsx("label",{htmlFor:"cardNum",children:"Expiry Date (MM/YY):"}),e.jsx("input",{type:"text",placeholder:"MM/YY",className:"input input-info w-full bg-gray-100 rounded-lg",...l("expirydate",{required:"Expirey date is required",pattern:{value:/(0[1-9]|1[0-2])\/?([0-9]{2})/,message:"Please enter month and year"}})}),s.expirydate&&e.jsxs("p",{className:"text-red-500 text-sm",children:[" ",s.expirydate.message," "]})]})]}),e.jsxs("div",{className:"flex flex-col py-2 gap-2 mb-4",children:[e.jsx("label",{htmlFor:"Hname",children:"Card Holder"}),e.jsx("input",{type:"text",id:"Hname",placeholder:"Enter the name on the card...",className:"input input-info w-full bg-gray-100 rounded-lg",...l("holdername",{required:"Name is required"})}),s.holdername&&e.jsx("p",{className:"text-red-500 text-sm",children:s.holdername.message})]}),e.jsx("button",{type:"submit",className:"w-full mt-3 btn btn-xs sm:btn-sm md:btn-md lg:btn-lg xl:btn-xl bg-blue-500 hover:bg-blue-700 text-white",children:"Pay Now"})]})}),e.jsx("div",{children:r&&e.jsx(C,{details:r,totalDays:a,setTotalDays:h,fromDate:u,setFromDate:f,toDate:x,setToDate:j})})]})]})}export{M as default};
